---
import HeaderLink from './HeaderLink.astro';
import { SITE_TITLE } from '../consts';
---

<header>
	<nav>
		<h2><a href="/">{SITE_TITLE}</a></h2>
		
		<button class="menu-button" aria-label="Menu">
			<div class="hamburger-lines">
				<span class="line line1"></span>
				<span class="line line2"></span>
				<span class="line line3"></span>
			</div>
		</button>

		<div class="menu-items">
			<div class="internal-links">
				<HeaderLink href="/">Accueil</HeaderLink>
				<HeaderLink href="/blog">Propositions</HeaderLink>
				<HeaderLink href="/about">À propos</HeaderLink>
			</div>
			<div class="contact-links">
				<a href="mailto:contact@alexandregrondin.ca" title="Courriel">
					<span class="sr-only">Envoyez-moi un courriel</span>
					<svg viewBox="0 0 24 24" aria-hidden="true" width="32" height="32">
						<path fill="currentColor" d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z"/>
					</svg>
				</a>
				<a href="tel:+14501234567" title="Téléphone">
					<span class="sr-only">Appelez-moi</span>
					<svg viewBox="0 0 24 24" aria-hidden="true" width="32" height="32">
						<path fill="currentColor" d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/>
					</svg>
				</a>
				<a href="#" onclick="navigator.clipboard.writeText('Alexandre Grondin'); alert('Nom copié!')" title="Messenger">
					<span class="sr-only">Contactez-moi sur Messenger</span>
					<svg viewBox="0 0 24 24" aria-hidden="true" width="32" height="32">
						<path fill="currentColor" d="M12 2C6.36 2 2 6.13 2 11.7c0 2.91 1.19 5.44 3.14 7.17.16.14.26.39.24.63l-.1 1.85c-.02.36.2.67.54.77.12.04.24.05.36.05.22 0 .44-.08.62-.23l2.93-2.06c.29-.2.63-.29.98-.28 1.39.08 2.78-.05 4.08-.38 3.35-.86 5.6-3.74 5.6-7.07C20 6.13 15.64 2 12 2zm4 8.86-1.86 2.85c-.28.43-.95.47-1.28.08l-1.38-1.63c-.14-.17-.38-.19-.55-.05L8.36 14.1c-.38.29-.88-.06-.77-.52l1.42-5.9c.11-.46.68-.63 1-.28L11.57 9c.16.19.45.19.61 0L14 7.03c.38-.45 1.09-.29 1.28.29l.72 2.86c.08.31-.03.64-.28.85z"/>
					</svg>
				</a>
			</div>
		</div>
	</nav>
</header>

<style>
	header {
		margin: 0;
		padding: 0 1em;
		background: white;
		box-shadow: 0 2px 8px rgba(var(--black), 5%);
		position: relative;
	}

	nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: 1rem 0;
	}

	h2 {
		margin: 0;
		font-size: 1em;
		z-index: 1001;
	}

	h2 a,
	h2 a.active {
		text-decoration: none;
	}

	/* Menu Button Styles */
	.menu-button {
		display: block;
		background: none;
		border: none;
		cursor: pointer;
		padding: 0.5rem;
		z-index: 1001;
		position: relative;
	}

	.hamburger-lines {
		display: flex;
		flex-direction: column;
		justify-content: space-between;
		height: 20px;
		width: 26px;
	}

	.line {
		display: block;
		height: 3px;
		width: 100%;
		border-radius: 10px;
		background: #0D0D0D;
		transition: all 0.3s ease-in-out;
	}

	/* Menu Items Styles */
	.menu-items {
		display: none;
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		background: white;
		padding: 4rem 2rem 2rem 2rem;
		z-index: 1000;
		box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
		max-height: 300px;
		overflow-y: auto;
	}

	.menu-items.show {
		display: block;
	}

	.internal-links {
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 1rem;
		margin-bottom: 1.5rem;
	}

	.internal-links a {
		font-size: 1.2rem;
		width: 100%;
		text-align: center;
		padding: 0.75rem;
		color: var(--black);
		text-decoration: none;
		border: none;
		transition: background-color 0.3s ease;
	}

	.internal-links a:hover {
		background-color: rgba(var(--accent), 0.1);
	}

	.internal-links a.active {
		background-color: rgba(var(--accent), 0.15);
	}

	.contact-links {
		display: flex;
		justify-content: center;
		gap: 2rem;
		padding-top: 1rem;
		border-top: 1px solid rgba(0, 0, 0, 0.1);
	}

	.contact-links a {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 48px;
		height: 48px;
		border-radius: 50%;
		transition: background-color 0.3s ease;
		color: var(--black);
	}

	.contact-links a:hover {
		background-color: rgba(var(--accent), 0.1);
	}

	/* Animation for hamburger to X */
	.menu-button.active .line1 {
		transform: rotate(45deg) translate(5px, 5px);
	}

	.menu-button.active .line2 {
		opacity: 0;
	}

	.menu-button.active .line3 {
		transform: rotate(-45deg) translate(7px, -7px);
	}

	/* Screen reader only class */
	.sr-only {
		position: absolute;
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		white-space: nowrap;
		border: 0;
	}
</style>

<script>
	document.addEventListener('DOMContentLoaded', () => {
		const menuButton = document.querySelector('.menu-button');
		const menuItems = document.querySelector('.menu-items');
		const allMenuLinks = menuItems?.querySelectorAll('a');

		function toggleMenu() {
			menuItems?.classList.toggle('show');
			menuButton?.classList.toggle('active');
		}

		menuButton?.addEventListener('click', (e) => {
			e.stopPropagation();
			toggleMenu();
		});

		// Close menu when clicking a link
		allMenuLinks?.forEach(link => {
			link.addEventListener('click', () => {
				menuItems?.classList.remove('show');
				menuButton?.classList.remove('active');
			});
		});

		// Close menu when clicking outside
		document.addEventListener('click', (e) => {
			const isClickInside = menuItems?.contains(e.target as Node) || menuButton?.contains(e.target as Node);
			if (!isClickInside && menuItems?.classList.contains('show')) {
				toggleMenu();
			}
		});
	});
</script>
